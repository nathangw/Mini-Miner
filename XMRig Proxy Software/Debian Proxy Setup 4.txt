

********************  COMMON COMMANDS  ********************


Check for any log rotation errors:   sudo logrotate -d /etc/logrotate.conf










********************  LIMIT ALL LOGS TO 1 MONTH   ********************


Command:   sudo nano /etc/logrotate.d/proxy-logs-1month
#########################################################
# /etc/logrotate.d/proxy-logs-1month
# Keeps ONLY the last 31 days of proxy logs
# Auto-generated for 1-month retention

/var/log/proxy-watchdog.log /var/log/proxy_update.log /var/log/proxy-status.log /var/log/xmrig-proxy.log /var/log/xmrig-proxy-access.log {
    weekly
    # 4 weeks = ~1 month
    rotate 4
    # delete anything older than 31 days
    maxage 31
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    sharedscripts
    postrotate
        systemctl try-restart proxy-watchdog.service >/dev/null 2>&1 || true
        systemctl try-restart proxy-status.service >/dev/null 2>&1 || true
        journalctl --vacuum-time=31days --quiet >/dev/null 2>&1 || true
    endscript
}
#########################################################
Ctrl-O, Enter, Ctrl-X








Command:   sudo nano /etc/systemd/journald.conf

Replace everything with:
#########################################################
[Journal]
Storage=persistent
SystemMaxUse=200M
SystemMaxFileSize=20M
SystemKeepFree=500M
SystemMaxFiles=10
RuntimeMaxFileSize=10M
RuntimeMaxUse=50M
# exactly 31 days (31 Ã— 86 400)
MaxRetentionSec=2678400
#########################################################
Ctrl-O, Enter, Ctrl-X



Command:   sudo systemctl restart systemd-journald

Delete old custom logs:   sudo find /var/log -type f \( -name "proxy-watchdog.log*" -o -name "proxy_update.log*" -o -name "proxy-status.log*" -o -name "xmrig-proxy.log*" -o -name "xmrig-proxy-access.log*" \) -mtime +31 -delete

Delete old journal entries:   sudo journalctl --vacuum-time=31days --quiet

Force logrotate to run now:   sudo logrotate -f /etc/logrotate.conf


Command:   sudo reboot









